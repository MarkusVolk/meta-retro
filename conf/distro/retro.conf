require conf/distro/poky.conf

DISTRO = "retro"
DISTRO_NAME = "Retro"
DISTRO_CODENAME = "zeus"

MAINTAINER = "Bart≈Çomiej Burdukiewicz <bartlomiej.burdukiewicz@gmail.com>"

RPI_ALWAYS_FULLHD ??= "1"
RPI_ENABLE_AUDIO ??= "1"

DISTRO_FEATURES_BACKFILL_CONSIDERED += "sysvinit"
VIRTUAL-RUNTIME_init_manager = "systemd"
VIRTUAL-RUNTIME_initscripts = "systemd-compat-units"

RETRO_ADDITIONAL_MULTIMEDIA_PACKAGES ?= ""

RETRO_ADDITIONAL_MESA_GPUS ?= " \
  etnaviv \
  freedreno \
  lima \
  panfrost \
  r600 \
  vc4 \
"

PACKAGECONFIG_append_pn-mesa = "${RETRO_ADDITIONAL_MESA_GPUS}"

RETRO_DISTRIBUTION_FEATURES ??= " \
  retroarch-automount \
  retroarch-gles \
  retroarch-gles3 \
  retroarch-opengl \
  retroarch-vulkan \
  alsa \
  systemd \
  pam \
"

DISTRO_FEATURES_append = " \
  ${RETRO_DISTRIBUTION_FEATURES} \
  alsa \
  systemd \
  pam \
"

RETROARCH_PREFERRED_KERNEL_FOR_X86 ?= "linux-yocto"

PREFERRED_PROVIDER_virtual/kernel_x86 = "${RETROARCH_PREFERRED_KERNEL_FOR_X86}"
PREFERRED_PROVIDER_virtual/kernel_x86-64 = "${RETROARCH_PREFERRED_KERNEL_FOR_X86}"

DISTRO_FEATURES_remove = "x11"
DISTRO_FEATURES_remove = "pulseaudio"

SYSTEMD_DEFAULT_TARGET = "graphical.target"

SANITY_TESTED_DISTROS_append = "gentoo \n"
